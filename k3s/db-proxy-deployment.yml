apiVersion: v1
kind: DaemonSet
metadata:
  name: proxy-db
  labels:
    app: osmotic-proxy
    name: proxy-db
spec:
  tolerations:
    # this toleration is to have the daemonset runnable on master nodes
    # remove it if your masters can't run pods
    - key: node-role.kubernetes.io/master
      operator: Exists
      effect: NoSchedule
  containers:
    - image: osmotic-proxy:latest
      name: osmotic-proxy
      ports:
        - name: proxy
          containerPort: 8080
    - image: couchdb:3.2
      name: db
      env:
        - name: COUCHDB_USER
          value: admin
        - name: COUCHDB_PASSWORD
          value: "Fcrlab2021!"

